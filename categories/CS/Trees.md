---
export_on_save:
  html: true
title: Trees
image: data:image/png;base64,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
description: Different types of trees
topics: AVL and Red Black trees
sources:
publish: True
---

# Disclaimer

Despite all the benefits of trees, also **recognize the cons**

- Require sorting
- Complex implementation
- Doesn't give a constant time on retrieves or operations, which vector `get()` and hash tables can get you respectively

# BSTs

For operations, see [this](https://www.guru99.com/binary-search-tree-data-structure.%C3%A7) page.

For a C++ implementation, see [this](https://gist.github.com/harish-r/a7df7ce576dda35c9660) page.

## Removals

- Two children - Replace with a successor, a `findMin()` on the right subtree

## Formulas

For an $n$ node tree

- Worst case depth is $n - 1$
- Max nodes is $2^{h+1} -1$

# [AVL](https://visualgo.net/bn/bst)

- The **balance** is $H(R) - H(L)$
- Runtime analysis of $\Theta (d)$ where **$d$ is the depth** of the node being found r inserted. Operations are $\Theta (log n)$

## Insertion Cases

### Single Rotations

**Single** rotation, **single** direction.

Parent **loses pointer** in the **opposite direction** of the rotation (which is replaced by the left pointer of the child), child **gains pointer** to the parent in the _same direction_ of the rotation. If the child has a child towards the parent, make that the child of the parent.

#### Single Left

![AVL Single Left](https://www.tutorialspoint.com/data_structures_algorithms/images/avl_left_rotation.jpg)

**Note**: This does not show the general case, where B has a left child as well. In that case, the left child of B would become the right child of A.

- Left subtree, left child
  - Unbalanced **towards left** means **rotate right**

<span class="red">Pointers Swapped: </span> Parent loses its child pointer, it's right pointer becoming that of the left of the child, child gains a left pointer to parent

Say we have the inserted node, it's parent, grandparent, and grand-grandparent.

##### 3 or 4 Pointer changes

- Grand-grandparent right -> Parent
- Grandparent's right -> `NULL` or parent's left child
- Parent's left -> Grandparent
- Parent's right -> inserted node

#### Single Right

![AVL Single Right](https://www.tutorialspoint.com/data_structures_algorithms/images/avl_right_rotation.jpg)

**Note**: This does not show the general case, where B has a right child as well. In that case, the right child of B would become the left child of A.

- Right subtree, right child (but a **left** rotation)
  - Unbalanced Unbalanced **towards right** means **rotate left**

<span class="red">Pointers Swapped: </span> Parent loses its child pointer, child gains a right pointer to parent

##### 3 or 4 Pointer changes

- Grand-grandparent left -> Parent
- Grandparent's left -> `NULL` or parent's right child
- Parent's right -> Grandparent
- Parent's left -> inserted node

### [Double Rotations](https://www.tutorialspoint.com/data_structures_algorithms/avl_tree_algorithm.htm)

Consider the **lowest unbalanced node**, and let it be called the **parent node** in this case.

The insert happened in the **right** subtree of the <span class="red">left</span> child.

Then we perform a single **left** rotation on the child, and a single <span class="red">right</span> on the parent.

# [Red Black](<(https://www.youtube.com/watch?v=5IBxA-bZZH8&t=118s)>)

![RB](https://www.cs.auckland.ac.nz/software/AlgAnim/fig/rb_tree1a.gif)

Red black trees are **less rigidly balanced** than AVL, and better for performance in general.

## Properties

- Root and leaves (`NULL`) are **black**
- <span class="red">Red</span> nodes have **black** children
- Every path from a node to a descendant leaf (a **black** `NULL`) contains the same number of **black** nodes

## Insertion

Insert red, recolor and rotate.

### Cases:

1. New node is the root node
2. New node's parent is **black**
3. The parent and the uncle are <span class="red">red</span>
4. Parent is <span class="red">red</span>, uncle is **black**, new node is the right or left child of parent

### Case 1

Simply make sure it is **black**

### Case 2

No violations! Hooray!

### Case 3

Make the grandparent <span class="red">red</span> and the parent and uncle **black**, recursively.

![Case 3](/static/assets/media/case3.png)

### Case 4

#### Triangle Case

![Triangle Case](/static/assets/media/triangle.png)

Single rotation of Z's parent in the **opposite** direction of Z

#### Line Case

![Line Case](/static/assets/media/line.png)

Single rotation of Z's grandparent in the **opposite** direction of Z

# Splay Trees

Rotate til most recent node becomes root

## Pros

- Easy implementation
- Still $\Theta (log (n))$ amortized
- Good for caches

## Cons

- Not guaranteed $\Theta (log (n))$ for single ops, can be $\Theta (n)$
- Poor in uniform accesses

# Vector Amortized

We have to make about $n-100$ copies for insert

## Inserts

- $O(n)$ worst case
- $\Theta (1)$ _amortized_ for many ops

This shows that although an individual operation takes $n$ steps, a series of $c$ operations takes $cn$ steps, which, averaging by dividing by n, means we have **an average of $c$ steps.**
